#include<cstdio>
#include<iostream>
#include<cstring>
#include<algorithm>
#include<map>
#include<queue>
using namespace std;

typedef long long LL;
const int SZ = 200010;
const int INF = 1000000010;

int biao[] = {0,0,0,0,0,1,2,5,8,14,20,30,40,55,70,91,112,140,168,204,240,285,330,385,440,506,572,650,728,819,910,1015,1120,1240,1360,1496,1632,1785,1938,2109,2280,2470,2660,2870,3080,3311,3542,3795,4048,4324,4600,4900,5200,5525,5850,6201,6552,6930,7308,7714,8120,8555,8990,9455,9920,10416,10912,11440,11968,12529,13090,13685,14280,14910,15540,16206,16872,17575,18278,19019,19760,20540,21320,22140,22960,23821,24682,25585,26488,27434,28380,29370,30360,31395,32430,33511,34592,35720,36848,38024,39200,40425,41650,42925,44200,45526,46852,48230,49608,51039,52470,53955,55440,56980,58520,60116,61712,63365,65018,66729,68440,70210,71980,73810,75640,77531,79422,81375,83328,85344,87360,89440,91520,93665,95810,98021,100232,102510,104788,107134,109480,111895,114310,116795,119280,121836,124392,127020,129648,132349,135050,137825,140600,143450,146300,149226,152152,155155,158158,161239,164320,167480,170640,173880,177120,180441,183762,187165,190568,194054,197540,201110,204680,208335,211990,215731,219472,223300,227128,231044,234960,238965,242970,247065,251160,255346,259532,263810,268088,272459,276830,281295,285760,290320,294880,299536,304192,308945,313698,318549,323400,328350,333300,338350,343400,348551,353702,358955,364208,369564,374920,380380,385840,391405,396970,402641,408312,414090,419868,425754,431640,437635,443630,449735,455840,462056,468272,474600,480928,487369,493810,500365,506920,513590,520260,527046,533832,540735,547638,554659,561680,568820,575960,583220,590480,597861,605242,612745,620248,627874,635500,643250,651000,658875,666750,674751,682752,690880,699008,707264,715520,723905,732290,740805,749320,757966,766612,775390,784168,793079,801990,811035,820080,829260,838440,847756,857072,866525,875978,885569,895160,904890,914620,924490,934360,944371,954382,964535,974688,984984,995280,1005720,1016160,1026745,1037330,1048061,1058792,1069670,1080548,1091574,1102600,1113775,1124950,1136275,1147600,1159076,1170552,1182180,1193808,1205589,1217370,1229305,1241240,1253330,1265420,1277666,1289912,1302315,1314718,1327279,1339840,1352560,1365280,1378160,1391040,1404081,1417122,1430325,1443528,1456894,1470260,1483790,1497320,1511015,1524710,1538571,1552432,1566460,1580488,1594684,1608880,1623245,1637610,1652145,1666680,1681386,1696092,1710970,1725848,1740899,1755950,1771175,1786400,1801800,1817200,1832776,1848352,1864105,1879858,1895789,1911720,1927830,1943940,1960230,1976520,1992991,2009462,2026115,2042768,2059604,2076440,2093460,2110480,2127685,2144890,2162281,2179672,2197250,2214828,2232594,2250360,2268315,2286270,2304415,2322560,2340896,2359232,2377760,2396288,2415009,2433730,2452645,2471560,2490670,2509780,2529086,2548392,2567895,2587398,2607099,2626800,2646700,2666600,2686700,2706800,2727101,2747402,2767905,2788408,2809114,2829820,2850730,2871640,2892755,2913870,2935191,2956512,2978040,2999568,3021304,3043040,3064985,3086930,3109085,3131240,3153606,3175972,3198550,3221128,3243919,3266710,3289715,3312720,3335940,3359160,3382596,3406032,3429685,3453338,3477209,3501080,3525170,3549260,3573570,3597880,3622411,3646942,3671695,3696448,3721424,3746400,3771600,3796800,3822225,3847650,3873301,3898952,3924830,3950708,3976814,4002920,4029255,4055590,4082155,4108720,4135516,4162312,4189340,4216368,4243629,4270890,4298385,4325880,4353610,4381340,4409306,4437272,4465475,4493678,4522119,4550560,4579240,4607920,4636840,4665760,4694921,4724082,4753485,4782888,4812534,4842180,4872070,4901960,4932095,4962230,4992611,5022992,5053620,5084248,5115124,5146000};

LL read()
{
    LL n = 0;
    char a = getchar();
    int flag = 0;
    while(a < '0' || a > '9') { if(a == '-') flag = 1; a = getchar(); }
    while(a >= '0' && a <= '9') n = n * 10 + a - '0',a = getchar();
    if(flag) n = -n;
    return n;
}

int mp[510][510];

int main()
{
    int T = read();
    while(T --)
    {
        int n = read();
        for(int u = 1;u <= n;u ++)
        {
            for(int d = 1;d + u <= n;d ++)
            {
                int v = d + u;
                mp[u][v] = mp[v][u] = (d & 1) + 1;
            }
        }
        printf("%d\n",biao[n]);
        for(int i = 1;i <= n;i ++)
            for(int j = 1;j <= n;j ++)
                printf("%d%c",mp[i][j],j == n ? '\n' : ' ');
    }
    return 0;
}
